// Top-level build file where you can add configuration options common to all sub-projects/modules.

buildscript {
    repositories {
        jcenter()
    }
    dependencies {
        classpath 'com.android.tools.build:gradle:2.1.2'

        // NOTE: Do not place your application dependencies here; they belong
        // in the individual module build.gradle files
    }
}

allprojects {
    repositories {
        jcenter()
    }
}

task customClean(type: Delete) {
    delete rootProject.buildDir
}

tasks.withType(JavaCompile){
    options.encoding = "UTF-8"
}

apply plugin:'java'

dependencies {
    implementation fileTree(include: ['*.jar'], dir: 'libs')
    implementation 'net.lingala.zip4j:zip4j:1.3.2'
    implementation 'commons-cli:commons-cli:1.4'
}

task runnableJar(dependsOn:['customClean', 'compileJava'], type : Jar){

    archiveName = 'Jar4MultiChannel.jar'
    //需打包的资源所在的路径集
    from("${project.buildDir.absolutePath}/classes/main"){
        include '**'
    }

    from configurations.runtime.asFileTree.files.collect{
        zipTree(it)
    }
    manifest{
        attributes 'Main-Class':'com.sunteng.multichannelpackagefactory.Main'
    }
}

apply plugin: 'java'
